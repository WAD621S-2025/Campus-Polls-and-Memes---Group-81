<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CampusConnect - Memes</title>
<style>
  /* ROOT VARIABLES */
  :root {
    --primary: #4e54c8;
    --secondary: #8f94fb;
    --accent: #ff6a3d;
    --bg-light: #f5f5f5;
    --bg-dark: #121212;
    --text-light: #ffffff;
    --text-dark: #222222;
    --shadow: rgba(0,0,0,0.15);
  }

  body {
    font-family: 'Segoe UI', sans-serif;
    margin:0;
    padding:0;
    background-color: var(--bg-light);
    color: var(--text-dark);
    transition: background-color 0.3s, color 0.3s;
  }

  body.dark-mode {
    background-color: var(--bg-dark);
    color: var(--text-light);
  }

  .navbar {
    display:flex;
    justify-content: space-between;
    align-items:center;
    padding:10px 20px;
    background: linear-gradient(90deg,var(--primary),var(--secondary));
    color:white;
  }

  .navbar a { color:white; text-decoration:none; margin:0 10px;}
  .navbar button { cursor:pointer; }

  h2.section-title {
    text-align:center;
    font-size:2rem;
    margin:30px 0 10px;
  }

  /* Meme Belt */
  #memes-belt-container {
    overflow:hidden;
    white-space:nowrap;
    margin:20px 0;
    border-radius:15px;
    padding:10px 0;
    background: linear-gradient(90deg,var(--primary),var(--secondary));
  }

  .meme-card-belt {
    display:inline-block;
    margin:0 10px;
    transition: transform 0.3s;
    position:relative;
  }
  .meme-card-belt img {
    width:200px;
    height:200px;
    border-radius:15px;
    object-fit:cover;
  }
  .meme-card-belt:hover { transform: scale(1.1); }

  /* Meme Feed */
  #meme-feed {
    display:flex;
    flex-direction:column;
    gap:20px;
    padding:20px;
  }

  .feed-card {
    background: var(--bg-light);
    border-radius:15px;
    box-shadow: 0 4px 10px var(--shadow);
    padding:15px;
    transition: transform 0.3s, background 0.3s;
  }
  body.dark-mode .feed-card { background: #1e1e1e; }
  .feed-card img { width:100%; border-radius:15px; }
  .feed-actions { display:flex; gap:10px; margin-top:10px; }
  .feed-actions button { cursor:pointer; padding:5px 10px; border:none; border-radius:8px; background: var(--accent); color:white; transition: background 0.3s; }
  .feed-actions button:hover { background: var(--primary); }

  .comments-section { margin-top:10px; max-height:150px; overflow-y:auto; }
  .comment-item { display:flex; align-items:center; gap:10px; margin-bottom:5px; font-size:0.9rem; }
  .comment-item img { width:25px; height:25px; border-radius:50%; }

  /* Upload section */
  #upload-section { text-align:center; margin:30px 0; }
  #memeInput { padding:10px; border-radius:10px; border:2px solid var(--primary); cursor:pointer; transition: all 0.3s; }
  #memeInput:hover { border-color: var(--secondary); }
  #memePreview { margin-top:10px; max-width:200px; border-radius:10px; }

</style>
</head>
<body>

<!-- Navbar -->
<div class="navbar">
  <div><a href="index.html">CampusConnect</a></div>
  <div>
    <a href="polls.html">Polls</a>
    <a href="memes.html">Memes</a>
    <button id="darkModeToggle">üåô Dark Mode</button>
  </div>
</div>

<h2 class="section-title">Trending Campus Memes</h2>

<!-- Meme Belt -->
<div id="memes-belt-container"></div>

<!-- Meme Upload -->
<div id="upload-section">
  <input type="file" id="memeInput" accept="image/*">
  <br>
  <img id="memePreview" src="#" alt="Preview" style="display:none;">
</div>

<!-- Meme Feed -->
<div id="meme-feed"></div>

<script>
  // Dark mode toggle
  const toggleBtn = document.getElementById('darkModeToggle');
  toggleBtn.addEventListener('click', ()=>{
    document.body.classList.toggle('dark-mode');
    toggleBtn.textContent = document.body.classList.contains('dark-mode') ? 'üåû Light Mode' : 'üåô Dark Mode';
  });

  // Meme belt with actual memes
  const memesBelt = document.getElementById('memes-belt-container');
  const beltMemes = [
    'https://i.imgur.com/8Kz9zF5.jpg',
    'https://i.imgur.com/9X4u6dT.jpg',
    'https://i.imgur.com/5VHRs9G.jpg',
    'https://i.imgur.com/1U12uH5.jpg',
    'https://i.imgur.com/V6dR7Lw.jpg',
    'https://i.imgur.com/JyXxZ6a.jpg',
    'https://i.imgur.com/7JkR3cO.jpg',
    'https://i.imgur.com/Gl6pEb5.jpg',
    'https://i.imgur.com/TnZtZ21.jpg',
    'https://i.imgur.com/oY2Kq6f.jpg'
  ];

  beltMemes.forEach(src=>{
    const card = document.createElement('div');
    card.className='meme-card-belt';
    const img = document.createElement('img');
    img.src=src;
    card.appendChild(img);
    memesBelt.appendChild(card);
  });

  // Endless scrolling
  let pos=0;
  function beltAnimate(){
    pos -= 0.5;
    if(Math.abs(pos) >= memesBelt.scrollWidth/2) pos=0;
    memesBelt.style.transform = `translateX(${pos}px)`;
    requestAnimationFrame(beltAnimate);
  }
  beltAnimate();
  memesBelt.addEventListener('mouseenter', ()=>{ pos=pos; }); // stops on hover
  memesBelt.addEventListener('mouseleave', ()=>{ beltAnimate(); });

  // Meme feed
  const memeInput = document.getElementById('memeInput');
  const memePreview = document.getElementById('memePreview');
  const memeFeed = document.getElementById('meme-feed');

  const feedMemes = [
    {src:'https://i.imgur.com/5VHRs9G.jpg', comments:[{username:"Alice",avatar:"https://i.imgur.com/8Km9tLL.png",text:"So funny!"},{username:"Bob",avatar:"https://i.imgur.com/8Km9tLL.png",text:"üòÇ"}]},
    {src:'https://i.imgur.com/1U12uH5.jpg', comments:[{username:"Carol",avatar:"https://i.imgur.com/8Km9tLL.png",text:"Haha"},{username:"Dave",avatar:"https://i.imgur.com/8Km9tLL.png",text:"Campus vibes"}]},
    {src:'https://i.imgur.com/V6dR7Lw.jpg', comments:[{username:"Eve",avatar:"https://i.imgur.com/8Km9tLL.png",text:"Epic"}]},
    {src:'https://i.imgur.com/JyXxZ6a.jpg', comments:[{username:"Frank",avatar:"https://i.imgur.com/8Km9tLL.png",text:"LOL"}]}
  ];

  function addFeedMeme(src, comments){
    const card = document.createElement('div');
    card.className='feed-card';
    card.innerHTML=`<img src="${src}" alt="Meme">
      <div class="feed-actions">
        <button class="like">‚ù§Ô∏è 0</button>
        <button class="comment-btn">üí¨ Comment</button>
      </div>
      <div class="comments-section"></div>`;
    memeFeed.prepend(card);

    // Likes
    const likeBtn = card.querySelector('.like');
    let likes=0;
    likeBtn.addEventListener('click', ()=>{ likes++; likeBtn.textContent=`‚ù§Ô∏è ${likes}`; });

    // Existing comments
    const commentsContainer = card.querySelector('.comments-section');
    comments.forEach(c=>{
      const com = document.createElement('div');
      com.className='comment-item';
      com.innerHTML=`<img src="${c.avatar}" alt="avatar"> <strong>${c.username}:</strong> ${c.text}`;
      commentsContainer.appendChild(com);
    });

    // Add new comment
    const commentBtn = card.querySelector('.comment-btn');
    commentBtn.addEventListener('click', ()=>{
      const username = prompt("Enter your name:") || "Anonymous";
      const text = prompt("Write a comment:");
      if(text){
        const com = document.createElement('div');
        com.className='comment-item';
        com.innerHTML=`<img src="https://i.imgur.com/8Km9tLL.png" alt="avatar"> <strong>${username}:</strong> ${text}`;
        commentsContainer.appendChild(com);
      }
    });
  }

  feedMemes.forEach(m=>addFeedMeme(m.src,m.comments));

  // Upload user meme
  memeInput.addEventListener('change', ()=>{
    const file = memeInput.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload=e=>{
      const src=e.target.result;
      memePreview.src=src;
      memePreview.style.display='block';
      addFeedMeme(src,[{username:"You",avatar:"https://i.imgur.com/8Km9tLL.png",text:"New meme uploaded!"}]);
    };
    reader.readAsDataURL(file);
  });
</script>
</body>
</html>
